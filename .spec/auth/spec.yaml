spec_id: SPEC-auth-001
title: "Library API Authentication"
description: |
  Authenticate with KNUE library Pyxis API to obtain session credentials
  for subsequent API calls.

given_when_then:
  - given: "Valid library credentials are configured"
    when: "Login request is made to Pyxis API"
    then: "Session cookie and access token are returned"

  - given: "Invalid credentials are provided"
    when: "Login request is made"
    then: "Authentication error is returned with appropriate message"

  - given: "Library API is unavailable"
    when: "Login request is made"
    then: "Network error is handled gracefully with retry logic"

acceptance_tests:
  - id: TEST-auth-001
    desc: "Successfully authenticate with valid credentials"
  - id: TEST-auth-002
    desc: "Handle invalid credentials error"
  - id: TEST-auth-003
    desc: "Handle network timeout gracefully"
  - id: TEST-auth-004
    desc: "Parse session cookie from response headers"
  - id: TEST-auth-005
    desc: "Extract access token from response body"

technical_notes:
  endpoint: "POST https://lib.knue.ac.kr/pyxis-api/api/login"
  request_body:
    loginId: "string"
    password: "string"
  response:
    accessToken: "string (pyxis-auth-token)"
    cookies: "session cookies in Set-Cookie header"

dependencies:
  - governance: "env.yaml"

linked_tasks:
  - TASK-002
