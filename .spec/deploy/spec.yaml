spec_id: SPEC-deploy-001
title: "Custom Domain Mapping"
description: |
  Expose the KNUE BookFlow worker on the custom domain book.kadragon.work
  so users can access the service via a friendly hostname.

given_when_then:
  - given: "The worker is deployed"
    when: "A request is made to https://book.kadragon.work/*"
    then: "The request is routed to the knue-bookflow worker"

  - given: "Wrangler configuration is applied"
    when: "Deployment runs"
    then: "The route for book.kadragon.work is registered in Cloudflare"

acceptance_tests:
  - id: TEST-deploy-001
    desc: "wrangler.toml defines a route for book.kadragon.work/*"
  - id: TEST-deploy-002
    desc: "Deployment succeeds with the new route configured"

dependencies:
  - governance: "env.yaml"

linked_tasks:
  - TASK-017
