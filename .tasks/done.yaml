completed_tasks:
  - id: TASK-053
    spec_id: SPEC-arch-001
    status: completed
    completed_at: "2025-12-11T17:35:00"
    result: "CI workflow updated for monorepo structure."
    test_refs:
      - TEST-arch-001
  - id: TASK-054
    spec_id: SPEC-infra-001
    status: completed
    completed_at: "2025-12-11T18:05:00"
    result: "Infrastructure verified. Migrations checks passed (no new migrations)."
    test_refs:
      - TEST-infra-001
  - id: TASK-055
    spec_id: SPEC-infra-001
    status: completed
    completed_at: "2025-12-11T18:10:00"
    result: "Production deployment successful from Monorepo structure."
    test_refs:
      - TEST-infra-002
  - id: TASK-056
    spec_id: SPEC-maintenance-001
    status: completed
    completed_at: "2025-12-11T20:15:00Z"
    result: "Added zod as runtime dependency for @knue-bookflow/backend to align with validation usage."
    test_refs:
      - "npm test --workspace @knue-bookflow/backend"
  - id: TASK-057
    spec_id: SPEC-maintenance-001
    status: completed
    completed_at: "2025-12-11T21:20:00Z"
    result: "Audited dependency freshness across workspace; identified upgrade options and critical gaps."
    test_refs:
      - "npm view versions summary"
  - id: TASK-058
    spec_id: SPEC-maintenance-001
    status: completed
    completed_at: "2025-12-11T21:45:00Z"
    result: "Verified Wrangler 4.53 compatibility and upgraded backend devDependency; tests remain green."
    test_refs:
      - "npm test --workspace @knue-bookflow/backend"
  - id: TASK-059
    spec_id: SPEC-maintenance-001
    status: completed
    completed_at: "2025-12-11T07:50:00Z"
    result: "Added build:frontend script to root package.json to fix deployment build error."
    test_refs:
      - "npm run build:frontend"
  - id: TASK-060
    spec_id: SPEC-maintenance-001
    status: completed
    completed_at: "2025-12-11T07:58:00Z"
    result: "Updated package.json scripts for Monorepo deployment. Added root-level 'deploy' and 'db:migrate' commands."
    test_refs: []
  - id: TASK-061
    spec_id: SPEC-loan-plan-002
    status: completed
    completed_at: "2025-12-11T08:38:21Z"
    result: "Added Pyxis item availability lookup for planned loans, returning availability when any copy is READY and earliest due date otherwise; surfaced availability chips on Planned page."
    test_refs:
      - "npm test -- packages/backend/src/handlers/__tests__/planned-loans-handler.test.ts packages/backend/src/services/__tests__/library-client.test.ts packages/frontend/src/pages/PlannedLoansPage.test.tsx"
  - id: TASK-062
    spec_id: SPEC-loan-plan-002
    status: completed
    completed_at: "2025-12-11T11:21:05Z"
    result: "Added cached availability fetcher (5 min TTL) to reduce Pyxis item lookups for planned loans."
    test_refs:
      - "npm test -- packages/backend/src/handlers/__tests__/planned-loans-handler.test.ts packages/backend/src/services/__tests__/library-client.test.ts packages/frontend/src/pages/PlannedLoansPage.test.tsx"
  - id: TASK-063
    spec_id: SPEC-loan-plan-001
    status: completed
    completed_at: "2025-12-11T12:22:40Z"
    result: "Diagnosed missing call number display on planned loans: legacy entries lack callNumber because it was not stored pre-feature; new entries show call numbers when provided by Pyxis. Recommended manual re-add for affected items."
    test_refs: []
  - id: TASK-064
    spec_id: SPEC-loan-plan-001
    status: completed
    completed_at: "2025-12-11T12:29:37Z"
    result: "Captured explicit callNumber from Pyxis branchVolumes by updating normalization and tests; new planned loans now preserve call numbers even when volumes is numeric."
    test_refs:
      - "npm test -- packages/backend/src/handlers/__tests__/new-books-handler.test.ts packages/backend/src/handlers/__tests__/search-handler.test.ts"
  - id: TASK-065
    spec_id: SPEC-frontend-001
    status: completed
    completed_at: "2025-12-12T09:41:00Z"
    result: "Changed frontend default loanState filter to 'on_loan' so main Bookshelf page shows only currently borrowed books on initial load."
    test_refs:
      - TEST-frontend-007
      - "npm test -- filterBooks"
  - id: TASK-066
    spec_id: SPEC-new-books-001
    status: completed
    completed_at: "2025-12-14T14:40:00Z"
    result: "Implemented offset-based pagination for new books API with infinite scroll frontend. Backend: added offset parameter, hasMore flag, totalCount metadata; changed default days from 90 to 30. Frontend: migrated to useInfiniteQuery with Intersection Observer for infinite scroll. Users can now view all new books beyond 100-item limit."
    test_refs:
      - TEST-new-books-001
      - TEST-new-books-002
      - TEST-new-books-003
      - TEST-new-books-006
      - TEST-new-books-008
      - TEST-new-books-009
      - TEST-new-books-010
      - "npm test -- packages/backend/src/handlers/__tests__/new-books-handler.test.ts"
      - "npm test --workspace @knue-bookflow/frontend"
